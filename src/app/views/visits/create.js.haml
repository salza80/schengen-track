- if @visit.errors.any?
  :plain
    // Visit creation failed - show errors in modal
    $('#visitModal .modal-body').html('#{j render("form")}');
    
    // Re-initialize cascade dropdowns after form is reloaded
    const country = #{@country_options.html_safe};
    const CountriesList = new App.Cascade($('#Continent'), $('#visit_country_id'), country, 'id', 'name', 'continent_id');
- else
  :plain
    // Visit was successfully created
    $('#visitModal').modal('hide');
    
    // Show success message
    const message = '<div class="alert alert-success alert-dismissible fade show" role="alert">Visit was successfully created.<button type="button" class="close" data-dismiss="alert" aria-label="Close"><span aria-hidden="true">&times;</span></button></div>';
    $('body').prepend(message);
    
    // Get the saved visit's entry date (Rails already parsed the form submission)
    const dateString = '#{@visit.entry_date.to_s}'; // Already in YYYY-MM-DD format
    const dateParts = dateString.split('-');
    const entryYear = dateParts[0];
    const entryMonth = parseInt(dateParts[1]);
    
    // Store the date for highlighting after reload
    sessionStorage.setItem('newVisitDate', dateString);
    
    // Reload and scroll to the month of the new visit
    setTimeout(function() {
      window.location.href = '?month=' + entryMonth + '&year=' + entryYear;
    }, 300);
