%nav.navbar.navbar-expand-md.navbar-light.bg-light.sticky-top{role: "navigation", "aria-label": "Main navigation"}
  %a.navbar-brand.px-3.px-md-0{:href => visits_path(I18n.locale)}
    = image_tag("logo.svg", alt: t('common.schengen_calculator'), width: 48, height: 48)
    %span.navbar-text.site-title
      = t('common.schengen')
      %span.d-none.d-md-inline
        = t('common.visa')
      = t('common.calculator')
  %button.navbar-toggler{type: "button", "data-toggle" => "collapse", "data-target" => "#navbarContent", "aria-controls" => "navbarContent", "aria-expanded" => "false", "aria-label" => "Toggle navigation"}
    %span.navbar-toggler-icon
  .collapse.navbar-collapse{id: "navbarContent"}
    %ul.navbar-nav.nav-tabs.mx-auto
      %li.nav-item{class: (active_if(controller: 'visits')) }
        %a.nav-link{href: visits_path(I18n.locale) }
          %i.fa.fa-plane.mr-2{"aria-hidden": "true"}
          = t('common.trips')
      %li.nav-item{class: (active_if(controller: 'days'))}
        %a.nav-link{href: days_path(locale: I18n.locale)}
          %i.fa.fa-calendar.mr-2{"aria-hidden": "true"}
          = t('common.calendar')
      %li.nav-item{class: (active_if(controller: 'about'))}
        %a.nav-link{href: about_path(locale: I18n.locale)}
          %i.fa.fa-info-circle.mr-2{"aria-hidden": "true"}
          = t('common.about')
      %li.nav-item{class: (active_if(controller: 'blogs'))}
        %a.nav-link{href: blog_index_path(locale: I18n.locale)}
          %i.fa.fa-book.mr-2{"aria-hidden": "true"}
          = t('common.blog')
    %ul.navbar-nav.ml-auto
      %li.nav-item.dropdown.person-switcher
        %a#personDropdown.nav-link.dropdown-toggle.d-flex.flex-column.align-items-end{href: "#", "data-toggle": "dropdown", "aria-haspopup": "true", "aria-expanded": "false"}
          %span.person-name= current_person.full_name
          %small.person-nationality= current_person.nationality&.name || 'Not set'
        .dropdown-menu.dropdown-menu-right{"aria-labelledby": "personDropdown"}
          - current_user_or_guest_user.people.ordered.each do |person|
            = link_to set_current_person_path(person), method: :post, class: "dropdown-item #{'active' if person == current_person}" do
              - if person == current_person
                %i.fa.fa-check.mr-2{"aria-hidden": "true"}
              - else
                %span.mr-4
              = person.full_name
              %small.text-muted.ml-2= person.nationality&.name
          .dropdown-divider
          = link_to people_path(locale: I18n.locale), class: "dropdown-item" do
            %i.fa.fa-users.mr-2{"aria-hidden": "true"}
            Manage people
          = link_to new_person_path(locale: I18n.locale), class: "dropdown-item" do
            %i.fa.fa-plus.mr-2{"aria-hidden": "true"}
            Add new person
          = link_to edit_person_path(current_person, locale: I18n.locale), class: "dropdown-item" do
            %i.fa.fa-edit.mr-2{"aria-hidden": "true"}
            Edit current person
      - if user_signed_in?
        %li.nav-item
          %a.btn.btn-outline-dark.btn-sm{href: "#", onclick: "document.getElementById('logout-form').submit(); return false;", "aria-label": t('common.log_out')}
            %i.fa.fa-sign-out-alt.mr-2{"aria-hidden": "true"}
            = t('common.log_out')
          %form#logout-form{action: destroy_user_session_path, method: :post, style: "display: none;"}
            = hidden_field_tag :_method, :delete
            = hidden_field_tag :authenticity_token, form_authenticity_token
      - else
        %li.nav-item
          = link_to new_user_session_path(locale: I18n.locale), class: 'btn btn-primary ml-2' do
            %i.fa.fa-sign-in-alt.mr-2
            = t('common.login')
      / Legal links - visible only on mobile
      %li.nav-item.d-md-none.mt-3.pt-3.border-top
        %small.text-muted.d-block.mb-2.px-3= t('common.legal')
        .legal-links-mobile
          = link_to disclaimer_path(locale: I18n.locale), class: "d-block px-3 py-2 text-muted small" do
            %i.fa.fa-file-text.mr-2
            = t('common.disclaimer')
          = link_to privacy_path(locale: I18n.locale), class: "d-block px-3 py-2 text-muted small" do
            %i.fa.fa-shield-alt.mr-2
            = t('common.privacy_policy')
          = link_to datadeletion_path(locale: I18n.locale), class: "d-block px-3 py-2 text-muted small" do
            %i.fa.fa-trash.mr-2
            = t('common.data_deletion')
