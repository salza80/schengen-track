.calendar-sidebar.sticky-top{style: "top: 91px; max-height: calc(100vh - 111px); overflow-y: auto;"}
  -# Status information (if available)
  - if @status_summary
    .sidebar-section.card.mb-2
      .card-header.bg-primary.text-white
        %h6.mb-0
          %i.fa.fa-chart-line
          = t('days.current_status')
        %small.d-block.mt-1
          = t('common.as_of')
          = Date.today.strftime('%B %d, %Y')
      .card-body.p-3
        .status-info
          .mb-2
            %small.text-muted= t('days.days_used')
            .h5.mb-0
              %strong= @status_summary[:current_days]
              %span.text-muted / 90
              %span.badge.ml-2{class: status_badge_class(@status_summary[:status]), title: (@status_summary[:status] == 'overstay' ? t('days.overstay_tooltip') : nil), data: (@status_summary[:status] == 'overstay' ? {toggle: 'tooltip', placement: 'top'} : {})}
                - if @status_summary[:status] == 'overstay'
                  %i.fa.fa-exclamation-triangle
                = t("days.status_#{@status_summary[:status]}")
              - if @status_summary[:in_waiting_period] && @status_summary[:outside_schengen]
                %span.badge.badge-warning.ml-2{title: t('days.waiting_period_tooltip'), data: {toggle: 'tooltip', placement: 'top'}}
                  %i.fa.fa-clock
                  = t('days.legend_waiting')
          .mb-2
            %small.text-muted= t('days.days_remaining')
            .h5.mb-0{class: "text-#{status_text_class(@status_summary[:status])}"}
              %strong= @status_summary[:remaining_days]
          - if current_user_or_guest_user.visa_required? && @status_summary[:visa_status]
            .mb-2.mt-3.pt-3.border-top
              %small.text-muted= t('days.visa_status_label')
              .h5.mb-0
                - if @status_summary[:visa_status] == 'ok'
                  %span.badge.badge-success{title: t('days.visa_ok_tooltip'), data: {toggle: 'tooltip', placement: 'top'}}
                    %i.fa.fa-check
                    = t('days.visa_status_ok')
                  - if @status_summary[:visa_entries_display]
                    %small.ml-2.text-muted
                      = @status_summary[:visa_entries_display]
                - elsif @status_summary[:visa_issue_type] == 'entry_limit_exceeded'
                  - if @status_summary[:visa_entries_display]
                    %strong.mr-2= @status_summary[:visa_entries_display]
                  %span.badge.badge-danger
                    %i.fa.fa-exclamation-triangle
                    = t('days.entry_limit_exceeded')
                - else
                  %span.badge.badge-danger
                    %i.fa.fa-exclamation-triangle
                    = t('days.visa_warning')
          .text-center.mt-3
            = link_to days_path(year: Date.today.year, month: Date.today.month, day: Date.today.day, locale: I18n.locale), class: "btn btn-outline-primary btn-sm" do
              %i.fa.fa-calendar.mr-1
              = t('days.jump_to_today')
  -# Legend
  .sidebar-section.card
    .card-header.bg-dark.text-white
      %h6.mb-0
        %i.fa.fa-palette
        = t('days.legend')
    .card-body.p-2
      .legend-item.d-flex.align-items-center.mb-2
        .legend-color.outside-schengen.mr-2{style: "width: 30px; height: 30px; border-radius: 4px;"}
        %small= t('days.legend_outside')
      .legend-item.d-flex.align-items-center.mb-2
        .legend-color.in-schengen-safe.mr-2{style: "width: 30px; height: 30px; border-radius: 4px;"}
        %small= t('days.legend_safe')
      .legend-item.d-flex.align-items-center.mb-2
        .legend-color.overstay.mr-2{style: "width: 30px; height: 30px; border-radius: 4px;"}
        %small= t('days.legend_overstay')
      - if @overstay
        .legend-item.d-flex.align-items-center
          .legend-color.waiting-period.mr-2{style: "width: 30px; height: 30px; border-radius: 4px;"}
          %small= t('days.legend_waiting')
  -# Next entry options
  - if @next_entry_days && @next_entry_days.any?
    .sidebar-section.card.mb-2
      .card-header.bg-info.text-white
        %h6.mb-0
          %i.fa.fa-plane-arrival
          = t('days.next_entry_options')
      .card-body.p-2
        - @next_entry_days.take(3).each do |day|
          = link_to days_path(year: day.the_date.year, month: day.the_date.month, day: day.the_date.day, locale: I18n.locale), class: "next-entry-item border-bottom py-2 px-2 d-block text-decoration-none", style: "cursor: pointer;" do
            .entry-date
              %strong.text-primary
                = t('days.from_date_onwards', date: day.the_date.strftime('%b %d, %Y'))
            .entry-duration
              %small
                = t('days.stay_for_days', days: day.max_remaining_days)
                - if day.max_remaining_days == 90
                  %span.badge.badge-success.ml-1= t('days.full_stay')
            .entry-until
              %small.text-muted
                = t('days.until_date', date: (day.the_date + (day.max_remaining_days - 1).days).strftime('%b %d, %Y'))
  
  -# Help and resources link
  .sidebar-section.card.mt-2
    .card-body.text-center.py-3
      %small.text-muted= t('days.need_help')
      %div
        = link_to about_path(locale: I18n.locale), class: "btn btn-outline-primary btn-sm mt-2" do
          %i.fa.fa-question-circle.mr-1
          = t('days.learn_about_rule')
